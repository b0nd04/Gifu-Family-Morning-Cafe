<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åº—èˆ—è©³ç´° - Family Morning Cafe Gifu</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            orange: '#FFB347',
                            yellow: '#FFCC33',
                            green: '#77DD77',
                            light: '#FFF9E6',
                            text: '#4A4A4A'
                        }
                    },
                    fontFamily: {
                        sans: ['"Helvetica Neue"', 'Arial', '"Hiragino Kaku Gothic ProN"', '"Hiragino Sans"', 'Meiryo', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
        }
    </style>
</head>

<body class="bg-gray-50 text-brand-text">

    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center">
            <a href="index.html" class="flex items-center text-gray-500 hover:text-brand-orange transition mr-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
            </a>
            <h1 class="text-xl font-bold tracking-tight text-brand-orange">åº—èˆ—è©³ç´°</h1>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-8" id="main-content">
        <!-- Content will be injected here -->
        <div id="loading" class="text-center py-12 text-gray-500">
            èª­ã¿è¾¼ã¿ä¸­...
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center text-xs text-gray-500">
            &copy; 2024 Family Morning Cafe Gifu. All rights reserved.
        </div>
    </footer>

    <!-- Scripts -->
    <script src="api.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');

            // 1. Get ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const storeId = urlParams.get('id'); // ID is now string from microCMS

            // 2. Fetch Data & Find Store
            fetchStore(storeId)
                .then(store => {
                    renderDetail(store);
                })
                .catch(err => {
                    console.error(err);
                    showError();
                });

            function showError() {
                mainContent.innerHTML = `
                    <div class="text-center py-12">
                        <h2 class="text-2xl font-bold text-gray-400 mb-4">åº—èˆ—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ ğŸ˜¢</h2>
                        <a href="index.html" class="text-brand-orange hover:underline">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
                    </div>
                `;
            }

            function renderDetail(store) {
                // Helper for Parking Size
                const translateSize = (type) => {
                    const rawType = Array.isArray(type) ? type[0] : type;
                    if (rawType === 'Large/Minivan') return 'å¤§å‹å¯';
                    if (rawType === 'Normal') return 'ä¸­å‹ã¾ã§';
                    if (rawType === 'Light only') return 'è»½æ¨å¥¨';
                    return rawType;
                };

                // Section 1: Basic Info
                const basicInfoHtml = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                            <span class="mr-2">ğŸ </span>åŸºæœ¬æƒ…å ±
                        </h2>
                        <dl class="space-y-4">
                            <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">åº—èˆ—å</dt>
                                <dd class="flex-1 font-bold text-lg text-gray-800">${store.name}</dd>
                            </div>
                            <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">ä½æ‰€</dt>
                                <dd class="flex-1 text-gray-700">${store.adress || store.address}</dd>
                            </div>
                            <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">é›»è©±ç•ªå·</dt>
                                <dd class="flex-1 text-gray-700">${store.tel}</dd>
                            </div>
                           <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">å–¶æ¥­æ™‚é–“</dt>
                                <dd class="flex-1 text-gray-700">${store.business_hours}</dd>
                            </div>
                            <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°</dt>
                                <dd class="flex-1 font-bold text-brand-orange">${store.morning_hours}</dd>
                            </div>
                             <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">å®šä¼‘æ—¥</dt>
                                <dd class="flex-1 text-gray-700">${store.regular_holiday}</dd>
                            </div>
                        </dl>
                    </div>
                `;

                // Section 2: Parking Info
                const parkingDiff = Array.isArray(store.parking_difficulty) ? store.parking_difficulty[0] : store.parking_difficulty;
                const parkingInfoHtml = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                            <span class="mr-2">ğŸš—</span>é§è»Šå ´æƒ…å ±
                        </h2>
                        <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-6">
                            <div>
                                <dt class="font-bold text-gray-500 text-sm mb-1">å°æ•°</dt>
                                <dd class="text-lg font-bold">${store.parking_count}å°</dd>
                            </div>
                            <div>
                                <dt class="font-bold text-gray-500 text-sm mb-1">åºƒã•</dt>
                                <dd class="text-lg font-bold text-gray-800">${translateSize(store.parking_size_type)}</dd>
                            </div>
                            <div>
                                <dt class="font-bold text-gray-500 text-sm mb-1">åœã‚ã‚„ã™ã•</dt>
                                <dd class="text-lg font-bold">
                                    ${parkingDiff === 'æ˜“' ? '<span class="text-green-600">â— åœã‚ã‚„ã™ã„</span>' :
                        parkingDiff === 'æ™®' ? '<span class="text-blue-600">â—‹ æ™®é€š</span>' :
                            '<span class="text-red-500">â–³ é›£ã—ã„</span>'}
                                </dd>
                            </div>
                            <div>
                                <dt class="font-bold text-gray-500 text-sm mb-1">ç¬¬äºŒé§è»Šå ´</dt>
                                <dd class="text-gray-700">${store.has_second_parking ? 'ã‚ã‚Š' : 'ãªã—'}</dd>
                            </div>
                        </dl>
                    </div>
                `;

                // Section 3: Kids & Wifi Info
                let kidsMenuContent = store.kids_menu ? store.kids_menu : 'ãªã—';
                const kidsInfoHtml = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                            <span class="mr-2">ğŸ‘¶</span>ãŠå­æ§˜é€£ã‚Œãƒ»è¨­å‚™
                        </h2>
                         <dl class="space-y-4">
                            <div class="flex items-center justify-between border-b border-gray-100 pb-2 last:border-0">
                                <dt class="font-bold text-gray-700">ã‚­ãƒƒã‚ºã‚¹ãƒšãƒ¼ã‚¹</dt>
                                <dd>${store.has_kids_space ? '<span class="text-green-600 font-bold">ã‚ã‚Š</span>' : '<span class="text-gray-400">ãªã—</span>'}</dd>
                            </div>
                             <div class="flex items-center justify-between border-b border-gray-100 pb-2 last:border-0">
                                <dt class="font-bold text-gray-700">ã‚­ãƒƒã‚ºãƒ¡ãƒ‹ãƒ¥ãƒ¼</dt>
                                <dd class="text-right max-w-xs">${kidsMenuContent}</dd>
                            </div>
                            <div class="flex items-center justify-between border-b border-gray-100 pb-2 last:border-0">
                                <dt class="font-bold text-gray-700">å­ä¾›æ¤…å­</dt>
                                <dd>${store.has_high_chair ? 'ã‚ã‚Š' : 'ãªã—'}</dd>
                            </div>
                            <div class="flex items-center justify-between pt-2">
                                <dt class="font-bold text-gray-700">Wi-Fi</dt>
                                <dd>${store.has_wifi ? '<span class="text-brand-orange font-bold">ã‚ã‚Š ğŸ“¶</span>' : 'ãªã—'}</dd>
                            </div>
                        </dl>
                    </div>
                `;

                // Section 4: Map
                const mapHtml = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
                         <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                            <span class="mr-2">ğŸ“</span>åœ°å›³
                        </h2>
                        <p class="text-sm text-gray-500 mb-3">${store.map_adress || store.map_address}</p>
                        <div class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                            <iframe 
                                width="100%" 
                                height="100%" 
                                frameborder="0" 
                                style="border:0" 
                                src="https://maps.google.com/maps?q=${encodeURIComponent(store.map_adress || store.map_address)}&output=embed" 
                                allowfullscreen>
                            </iframe>
                        </div>
                    </div>
                `;

                // Assemble Main Layout
                mainContent.innerHTML = `
                    <!-- Hero Image -->
                    <div class="aspect-video w-full relative rounded-2xl overflow-hidden shadow-md mb-8">
                        <img src="${store.image.url}" alt="${store.name}" class="w-full h-full object-cover">
                        <div class="absolute bottom-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-md shadow text-lg font-bold flex items-center">
                            <span class="text-orange-400 mr-1">â˜…</span> <span>${store.rating}</span>
                        </div>
                    </div>

                    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">${store.name}</h1>
                    <p class="text-lg text-gray-600 mb-8">${store.description}</p>

                    <!-- Info Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2">
                            ${basicInfoHtml}
                        </div>
                        <div>
                            ${parkingInfoHtml}
                            ${kidsInfoHtml}
                        </div>
                        <div>
                            ${mapHtml}
                        </div>
                    </div>

                    <div class="mt-8 text-center">
                        <a href="index.html" class="inline-flex items-center justify-center px-8 py-4 border border-transparent text-base font-bold rounded-full shadow-sm text-white bg-brand-orange hover:bg-orange-500 transition transform hover:-translate-y-0.5">
                            ä¸€è¦§ã«æˆ»ã‚‹
                        </a>
                    </div>
                `;
            }
        });
    </script>
</body>

</html>