<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åº—èˆ—è©³ç´° - Family Morning Cafe Gifu</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            orange: '#FFB347',
                            yellow: '#FFCC33',
                            green: '#77DD77',
                            light: '#FFF9E6',
                            text: '#4A4A4A'
                        }
                    },
                    fontFamily: {
                        sans: ['"Helvetica Neue"', 'Arial', '"Hiragino Kaku Gothic ProN"', '"Hiragino Sans"', 'Meiryo', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-gray-50 text-brand-text">

    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-3 flex items-center">
            <a href="index.html" class="flex items-center text-gray-500 hover:text-brand-orange transition mr-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
            </a>
            <h1 class="text-xl font-bold tracking-tight text-brand-orange">åº—èˆ—è©³ç´°</h1>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-8" id="main-content">
        <!-- Content will be injected here -->
        <div id="loading" class="text-center py-12 text-gray-500">
            èª­ã¿è¾¼ã¿ä¸­...
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center text-xs text-gray-500">
            &copy; 2024 Family Morning Cafe Gifu. All rights reserved.
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');

            // 1. Get ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const storeId = parseInt(urlParams.get('id'));

            // 2. Fetch Data & Find Store
            fetch('data.json')
                .then(response => response.json())
                .then(stores => {
                    const store = stores.find(s => s.id === storeId);
                    if (!store) {
                        showError();
                        return;
                    }
                    renderDetail(store);
                })
                .catch(err => {
                    console.error(err);
                    showError();
                });

            function showError() {
                mainContent.innerHTML = `
                    <div class="text-center py-12">
                        <h2 class="text-2xl font-bold text-gray-400 mb-4">åº—èˆ—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ ğŸ˜¢</h2>
                        <a href="index.html" class="text-brand-orange hover:underline">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
                    </div>
                `;
            }

            function renderDetail(store) {
                // Helper for Parking Size
                const translateSize = (type) => {
                    if (type === 'Large/Minivan') return 'å¤§å‹å¯';
                    if (type === 'Normal') return 'ä¸­å‹ã¾ã§';
                    if (type === 'Light only') return 'è»½æ¨å¥¨';
                    return type;
                };

                // Section 1: Basic Info
                const basicInfoHtml = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                            <span class="mr-2">ğŸ </span>åŸºæœ¬æƒ…å ±
                        </h2>
                        <dl class="space-y-4">
                            <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">åº—èˆ—å</dt>
                                <dd class="flex-1 font-bold text-lg text-gray-800">${store.name}</dd>
                            </div>
                            <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">ä½æ‰€</dt>
                                <dd class="flex-1 text-gray-700">${store.address}</dd>
                            </div>
                            <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">é›»è©±ç•ªå·</dt>
                                <dd class="flex-1 text-gray-700">${store.tel}</dd>
                            </div>
                           <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">å–¶æ¥­æ™‚é–“</dt>
                                <dd class="flex-1 text-gray-700">${store.business_hours}</dd>
                            </div>
                            <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°</dt>
                                <dd class="flex-1 font-bold text-brand-orange">${store.morning_hours}</dd>
                            </div>
                             <div class="flex flex-col sm:flex-row">
                                <dt class="sm:w-32 font-bold text-gray-500 text-sm">å®šä¼‘æ—¥</dt>
                                <dd class="flex-1 text-gray-700">${store.regular_holiday}</dd>
                            </div>
                        </dl>
                    </div>
                `;

                // Section 2: Parking Info
                const parkingInfoHtml = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                            <span class="mr-2">ğŸš—</span>é§è»Šå ´æƒ…å ±
                        </h2>
                        <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-6">
                            <div>
                                <dt class="font-bold text-gray-500 text-sm mb-1">å°æ•°</dt>
                                <dd class="text-lg font-bold">${store.parking_count}å°</dd>
                            </div>
                            <div>
                                <dt class="font-bold text-gray-500 text-sm mb-1">åºƒã•</dt>
                                <dd class="text-lg font-bold text-gray-800">${translateSize(store.parking_size_type)}</dd>
                            </div>
                            <div>
                                <dt class="font-bold text-gray-500 text-sm mb-1">åœã‚ã‚„ã™ã•</dt>
                                <dd class="text-lg font-bold">
                                    ${store.parking_difficulty === 'æ˜“' ? '<span class="text-green-600">â— åœã‚ã‚„ã™ã„</span>' :
                        store.parking_difficulty === 'æ™®' ? '<span class="text-blue-600">â—‹ æ™®é€š</span>' :
                            '<span class="text-red-500">â–³ é›£ã—ã„</span>'}
                                </dd>
                            </div>
                            <div>
                                <dt class="font-bold text-gray-500 text-sm mb-1">ç¬¬äºŒé§è»Šå ´</dt>
                                <dd class="text-gray-700">${store.has_second_parking ? 'ã‚ã‚Š' : 'ãªã—'}</dd>
                            </div>
                        </dl>
                    </div>
                `;

                // Section 3: Kids & Wifi Info
                let kidsMenuContent = store.kids_menu ? store.kids_menu : 'ãªã—';
                const kidsInfoHtml = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                            <span class="mr-2">ğŸ‘¶</span>ãŠå­æ§˜é€£ã‚Œãƒ»è¨­å‚™
                        </h2>
                         <dl class="space-y-4">
                            <div class="flex items-center justify-between border-b border-gray-100 pb-2 last:border-0">
                                <dt class="font-bold text-gray-700">ã‚­ãƒƒã‚ºã‚¹ãƒšãƒ¼ã‚¹</dt>
                                <dd>${store.has_kids_space ? '<span class="text-green-600 font-bold">ã‚ã‚Š</span>' : '<span class="text-gray-400">ãªã—</span>'}</dd>
                            </div>
                             <div class="flex items-center justify-between border-b border-gray-100 pb-2 last:border-0">
                                <dt class="font-bold text-gray-700">ã‚­ãƒƒã‚ºãƒ¡ãƒ‹ãƒ¥ãƒ¼</dt>
                                <dd class="text-right max-w-xs">${kidsMenuContent}</dd>
                            </div>
                            <div class="flex items-center justify-between border-b border-gray-100 pb-2 last:border-0">
                                <dt class="font-bold text-gray-700">å­ä¾›æ¤…å­</dt>
                                <dd>${store.has_high_chair ? 'ã‚ã‚Š' : 'ãªã—'}</dd>
                            </div>
                            <div class="flex items-center justify-between pt-2">
                                <dt class="font-bold text-gray-700">Wi-Fi</dt>
                                <dd>${store.has_wifi ? '<span class="text-brand-orange font-bold">ã‚ã‚Š ğŸ“¶</span>' : 'ãªã—'}</dd>
                            </div>
                        </dl>
                    </div>
                `;

                // Section 4: Map
                const mapHtml = `
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
                         <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 flex items-center">
                            <span class="mr-2">ğŸ“</span>åœ°å›³
                        </h2>
                        <p class="text-sm text-gray-500 mb-3">${store.map_address}</p>
                        <div class="w-full h-64 bg-gray-200 rounded-lg overflow-hidden">
                            <iframe 
                                width="100%" 
                                height="100%" 
                                frameborder="0" 
                                style="border:0" 
                                src="https://maps.google.com/maps?q=${encodeURIComponent(store.map_address)}&output=embed" 
                                allowfullscreen>
                            </iframe>
                        </div>
                    </div>
                `;

                // 1. Top Tab Content (Aggregating existing sections)
                const topTabContent = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in">
                        <div class="md:col-span-2">
                            ${basicInfoHtml}
                        </div>
                        <div>
                            ${parkingInfoHtml}
                            ${kidsInfoHtml}
                        </div>
                        <div>
                            ${mapHtml}
                        </div>
                    </div>
                `;

                // 2. Menu Tab Content
                const menuImages = store.menu_images || [];
                let menuTabContent = '';
                if (menuImages.length > 0) {
                    menuTabContent = `
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in">
                            ${menuImages.map(url => `
                                <div class="rounded-xl overflow-hidden shadow-sm border border-gray-100 group">
                                    <img src="${url}" alt="ãƒ¡ãƒ‹ãƒ¥ãƒ¼" class="w-full h-auto object-cover group-hover:scale-105 transition duration-300 cursor-pointer" onclick="window.open(this.src, '_blank')">
                                </div>
                            `).join('')}
                        </div>
                        <p class="text-center text-gray-400 text-sm mt-4">â€»ç”»åƒã¯ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚å®Ÿéš›ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
                    `;
                } else {
                    menuTabContent = `<div class="text-center py-12 text-gray-500">ãƒ¡ãƒ‹ãƒ¥ãƒ¼æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“</div>`;
                }

                // 3. Photos Tab Content
                const gallery = store.gallery || {};
                const createGallerySection = (title, images) => {
                    if (!images || images.length === 0) return '';
                    return `
                        <div class="mb-8 last:mb-0">
                            <h3 class="text-lg font-bold text-gray-700 mb-3 border-l-4 border-brand-orange pl-3">${title}</h3>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                ${images.map(url => `
                                    <div class="aspect-square rounded-lg overflow-hidden shadow-sm hover:shadow-md transition bg-gray-100 group">
                                        <img src="${url}" class="w-full h-full object-cover group-hover:scale-110 transition duration-500 cursor-pointer" onclick="window.open(this.src, '_blank')">
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                };

                const photoTabContent = `
                    <div class="animate-fade-in bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
                        ${createGallerySection('æ–™ç†', gallery.food)}
                        ${createGallerySection('å†…è¦³', gallery.interior)}
                        ${createGallerySection('å¤–è¦³', gallery.exterior)}
                    </div>
                `;


                // Assemble Main Layout
                mainContent.innerHTML = `
                    <!-- Hero Image -->
                    <div class="aspect-video w-full relative rounded-2xl overflow-hidden shadow-md mb-8">
                        <img src="${store.image}" alt="${store.name}" class="w-full h-full object-cover">
                        <div class="absolute bottom-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-md shadow text-lg font-bold flex items-center">
                            <span class="text-orange-400 mr-1">â˜…</span> <span>${store.rating}</span>
                        </div>
                    </div>

                    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">${store.name}</h1>
                    <p class="text-lg text-gray-600 mb-8">${store.description}</p>

                     <!-- Tab Navigation -->
                    <div class="flex border-b-2 border-gray-100 mb-8 sticky top-[64px] bg-gray-50 z-30 pt-2 transition-all duration-300" id="sticky-tabs">
                        <button class="tab-btn px-4 sm:px-6 py-3 font-bold text-gray-500 border-b-2 border-transparent hover:text-brand-orange transition active-tab flex-1 sm:flex-none text-center" data-target="top">
                            åº—èˆ—ãƒˆãƒƒãƒ—
                        </button>
                        <button class="tab-btn px-4 sm:px-6 py-3 font-bold text-gray-500 border-b-2 border-transparent hover:text-brand-orange transition flex-1 sm:flex-none text-center" data-target="menu">
                            ãƒ¡ãƒ‹ãƒ¥ãƒ¼
                        </button>
                        <button class="tab-btn px-4 sm:px-6 py-3 font-bold text-gray-500 border-b-2 border-transparent hover:text-brand-orange transition flex-1 sm:flex-none text-center" data-target="photos">
                            å†™çœŸ
                        </button>
                    </div>

                    <!-- Tab Contents -->
                     <div style="min-height: 400px;"> <!-- Helper for sticky tabs -->
                        <div id="tab-top" class="tab-content block">
                            ${topTabContent}
                        </div>
                        <div id="tab-menu" class="tab-content hidden">
                            ${menuTabContent}
                        </div>
                        <div id="tab-photos" class="tab-content hidden">
                            ${photoTabContent}
                        </div>
                    </div>

                    <!-- Back Button Footer -->
                    <div class="mt-8 text-center pt-8 border-t border-gray-200">
                        <a href="index.html" class="inline-flex items-center justify-center px-8 py-4 border border-brand-orange text-brand-orange font-bold rounded-full hover:bg-orange-50 transition transform hover:-translate-y-0.5">
                            ä¸€è¦§ã«æˆ»ã‚‹
                        </a>
                    </div>
                `;

                // --- TAB LOGIC ---
                const tabBtns = document.querySelectorAll('.tab-btn');
                const tabContents = document.querySelectorAll('.tab-content');

                tabBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const target = btn.dataset.target;

                        // Update Buttons
                        tabBtns.forEach(b => {
                            b.classList.remove('text-brand-orange', 'border-brand-orange');
                            b.classList.add('text-gray-500', 'border-transparent');
                        });
                        btn.classList.remove('text-gray-500', 'border-transparent');
                        btn.classList.add('text-brand-orange', 'border-brand-orange');

                        // Update Contents
                        tabContents.forEach(c => {
                            c.classList.add('hidden');
                        });
                        const targetEl = document.getElementById('tab-' + target);
                        targetEl.classList.remove('hidden');

                        // Add fade animation
                        targetEl.classList.remove('animate-fade-in');
                        void targetEl.offsetWidth; // trigger reflow
                        targetEl.classList.add('animate-fade-in');
                    });
                });

                // Set initial active state correctly
                const activeBtn = document.querySelector('.active-tab');
                if (activeBtn) {
                    activeBtn.classList.remove('text-gray-500', 'border-transparent');
                    activeBtn.classList.add('text-brand-orange', 'border-brand-orange');
                }
            }
        });
    </script>
</body>

</html>